Traceback (most recent call last):
  File "/opt/hostedtoolcache/Python/3.8.13/x64/lib/python3.8/site-packages/jupyter_cache/executors/utils.py", line 51, in single_nb_execution
    executenb(
  File "/opt/hostedtoolcache/Python/3.8.13/x64/lib/python3.8/site-packages/nbclient/client.py", line 1204, in execute
    return NotebookClient(nb=nb, resources=resources, km=km, **kwargs).execute()
  File "/opt/hostedtoolcache/Python/3.8.13/x64/lib/python3.8/site-packages/nbclient/util.py", line 84, in wrapped
    return just_run(coro(*args, **kwargs))
  File "/opt/hostedtoolcache/Python/3.8.13/x64/lib/python3.8/site-packages/nbclient/util.py", line 62, in just_run
    return loop.run_until_complete(coro)
  File "/opt/hostedtoolcache/Python/3.8.13/x64/lib/python3.8/asyncio/base_events.py", line 616, in run_until_complete
    return future.result()
  File "/opt/hostedtoolcache/Python/3.8.13/x64/lib/python3.8/site-packages/nbclient/client.py", line 663, in async_execute
    await self.async_execute_cell(
  File "/opt/hostedtoolcache/Python/3.8.13/x64/lib/python3.8/site-packages/nbclient/client.py", line 965, in async_execute_cell
    await self._check_raise_for_error(cell, cell_index, exec_reply)
  File "/opt/hostedtoolcache/Python/3.8.13/x64/lib/python3.8/site-packages/nbclient/client.py", line 862, in _check_raise_for_error
    raise CellExecutionError.from_cell_and_msg(cell, exec_reply_content)
nbclient.exceptions.CellExecutionError: An error occurred while executing the following cell:
------------------
%matplotlib inline

reg_mom = ['Global','SouthernOcean','PacificOcean','IndianOcean','AtlanticOcean','Arctic','LabSea']
reg_pop = [0,1,2,3,6,10,8]
ds_pop = xr.open_dataset('/glade/scratch/gmarques/g210.GIAF_JRA.v13.gx1v7.01_temp_bias.nc').sel(time=slice('0001-01-01', 
                                                                                                           end_date))
vmax=2; vmin=-vmax
for m,p in zip(reg_mom,reg_pop):
  for path, case, i in zip(ocn_path, casename, range(len(casename))):
    ds_mom = xr.open_dataset(path+case+'_temp_bias.nc').sel(time=slice('0001-01-01', end_date))
    fig, ax = plt.subplots(nrows=1, ncols=2, figsize=(20,4.5), sharex=True)
    plt.suptitle(str(m)+', Potential Temperature bias [C], ({} - obs)'.format(label[i]), fontsize=14)
    splitscale =  [0., -500., -4000]
    dummy_mom = np.ma.masked_invalid(ds_mom.sel(region=m).temp_bias.values)
    dummy_pop = np.ma.masked_invalid(ds_pop.__xarray_dataarray_variable__.sel(region=str(p)).values)

    dummy_pop = np.ma.masked_invalid(ds_pop.sel(region=str(p)).__xarray_dataarray_variable__.values)

    ztplot(dummy_mom, ds_mom.time.values, ds_mom.z_l.values*-1, ignore=np.nan, splitscale=splitscale, 
           contour=True, axis=ax.flat[0] , title=label[i], extend='both', colormap='dunnePM', 
           autocenter=True, tunits='Year', show=False, clim=(vmin, vmax)) 
    ztplot(dummy_pop, ds_pop.time.values, -ds_pop.z_l.values/100., ignore=np.nan, splitscale=splitscale, 
           contour=True, axis=ax.flat[1] , title='POP', extend='both', colormap='dunnePM', 
           autocenter=True, tunits='Year', show=False, clim=(vmin, vmax))
    plt.subplots_adjust(top = 0.8)
------------------

[0;31m---------------------------------------------------------------------------[0m
[0;31mNameError[0m                                 Traceback (most recent call last)
Input [0;32mIn [2][0m, in [0;36m<cell line: 5>[0;34m()[0m
[1;32m      3[0m reg_mom [38;5;241m=[39m [[38;5;124m'[39m[38;5;124mGlobal[39m[38;5;124m'[39m,[38;5;124m'[39m[38;5;124mSouthernOcean[39m[38;5;124m'[39m,[38;5;124m'[39m[38;5;124mPacificOcean[39m[38;5;124m'[39m,[38;5;124m'[39m[38;5;124mIndianOcean[39m[38;5;124m'[39m,[38;5;124m'[39m[38;5;124mAtlanticOcean[39m[38;5;124m'[39m,[38;5;124m'[39m[38;5;124mArctic[39m[38;5;124m'[39m,[38;5;124m'[39m[38;5;124mLabSea[39m[38;5;124m'[39m]
[1;32m      4[0m reg_pop [38;5;241m=[39m [[38;5;241m0[39m,[38;5;241m1[39m,[38;5;241m2[39m,[38;5;241m3[39m,[38;5;241m6[39m,[38;5;241m10[39m,[38;5;241m8[39m]
[0;32m----> 5[0m ds_pop [38;5;241m=[39m [43mxr[49m[38;5;241m.[39mopen_dataset([38;5;124m'[39m[38;5;124m/glade/scratch/gmarques/g210.GIAF_JRA.v13.gx1v7.01_temp_bias.nc[39m[38;5;124m'[39m)[38;5;241m.[39msel(time[38;5;241m=[39m[38;5;28mslice[39m([38;5;124m'[39m[38;5;124m0001-01-01[39m[38;5;124m'[39m, 
[1;32m      6[0m                                                                                                            end_date))
[1;32m      7[0m vmax[38;5;241m=[39m[38;5;241m2[39m; vmin[38;5;241m=[39m[38;5;241m-[39mvmax
[1;32m      8[0m [38;5;28;01mfor[39;00m m,p [38;5;129;01min[39;00m [38;5;28mzip[39m(reg_mom,reg_pop):

[0;31mNameError[0m: name 'xr' is not defined
NameError: name 'xr' is not defined

